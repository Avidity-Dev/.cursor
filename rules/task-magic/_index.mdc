---
alwaysApply: false
---

# Task Magic System Overview

Whenever you use this rule, start your message with the following:

"Accessing Task Magic system overview..."

**üéØ Index Purpose**: This rule is **always included** and serves as your **rule dispatcher** - it guides you to fetch the specific rules you need based on user requests and detected conditions.

Task Magic consists of **TWO distinct but complementary parts**:

1. **The Project Management System** (`_parallel/` directory) - A tool-agnostic, file-based project management framework for organizing projects, tasks, plans, and memory
2. **The AI Agent Rules** (`.cursor/rules/task-magic/` directory) - Cursor-specific instructions that teach AI agents how to operate the project management system

## System Architecture

### The \_parallel/ Project Management System

A structured, tool-agnostic directory system for managing multiple projects:

```
_parallel/
  projects/
    {project-name}/
      plan.md         # Project PRD
      progress_log.md # Append-only chronological log
      STATUS.md       # Live hand-off snapshot (current status)
      tasks/          # Active tasks for this project
        task{id}_name.md
      TASKS.md        # Project task checklist
      context/        # Additional project context
      memory/         # Project-specific memory archive
        tasks/        # Archived tasks for this project
        MEMORY.md     # Project memory summary and insights
        TASKS_LOG.md  # Project-specific task archive log
  INDEX.md            # Global project registry
```

### The .cursor/rules/task-magic/ Rules System

Cursor-specific rules that teach agents how to use the \_parallel/ system:

- `tasks.mdc` - Task creation, management, and lifecycle
- `plan.mdc` - PRD creation and planning workflows
- `memory.mdc` - Archival and historical context management
- `expand.mdc` - Task complexity assessment and sub-task creation
- `handoff.mdc` - Context transfer between AI sessions
- `legacy.mdc` - Migration guide from legacy to enhanced system

## üö® CRITICAL: When to Fetch Each Rule

**NEVER work with Task Magic files without fetching the appropriate rule first!**

- **üö® MUST FETCH `@tasks.mdc` BEFORE**:

  - Creating, updating, or modifying any file in `_parallel/projects/{project}/tasks/`
  - Updating `_parallel/projects/{project}/TASKS.md`
  - Changing task status, adding timestamps, or working with task IDs
  - **Contains required procedures**: date command for timestamps, YAML format, file naming conventions, dependency checking

- **üö® MUST FETCH `@plan.mdc` BEFORE**:

  - Creating or updating any PRD files in `_parallel/projects/{project}/plan.md`
  - Working with project plans or feature context documents

- **üö® MUST FETCH `@memory.mdc` BEFORE**:

  - Archiving tasks from `_parallel/projects/{project}/tasks/` to project memory
  - Working with `_parallel/projects/{project}/memory/TASKS_LOG.md`
  - Creating or updating `_parallel/projects/{project}/memory/MEMORY.md` files
  - **Contains required procedures**: single-location archival process, project memory updates, task log management

- **üö® MUST FETCH `@expand.mdc` BEFORE**:

  - Determining if a task should be broken into sub-tasks
  - Creating sub-task structures

- **üö® MUST FETCH `@handoff.mdc` BEFORE**:

  - Creating or updating project progress files at `_parallel/projects/{project}/progress_log.md` or status snapshots at `_parallel/projects/{project}/STATUS.md`
  - Automatically at the end of a work session **or** when significant project state changes
  - (Still allowed) when the user explicitly requests a "handoff" or "progress update"
  - When user asks to "update progress" or similar phrasing
  - Before ending a significant work session on a complex project
  - When switching focus between different aspects of the same project
  - **Contains required procedures**: progress file templates, timestamp commands, update workflows

- **üö® MUST FETCH `@legacy.mdc` WHEN**:
  - **Detecting legacy structure**: `_parallel/tasks/`, `_parallel/TASKS.md`, `_parallel/plans/PLAN.md`, or `_parallel/plans/features/` exist
  - **User requests migration**: upgrading from old to new Task Magic system
  - **Mixed structure found**: both legacy and new files present
  - **Purpose**: Provides migration guidance to upgrade to enhanced project-scoped system

## Legacy System Detection

**üîç Automatic Detection Triggers:**
If you encounter any of these, immediately fetch `@legacy.mdc`:

- `_parallel/tasks/` directory exists (instead of `_parallel/projects/{project}/tasks/`)
- `_parallel/TASKS.md` file exists (instead of `_parallel/projects/{project}/TASKS.md`)
- `_parallel/plans/PLAN.md` file exists (instead of `_parallel/projects/{project}/plan.md`)
- `_parallel/plans/features/` directory exists (instead of `_parallel/projects/{project}/context/`)
- No `_parallel/projects/` directory structure present
- No `_parallel/INDEX.md` registry file

**Agent Response**: When legacy detected, inform user about enhanced system benefits and offer migration using the legacy rule.

## System Components (Rules Explanation)

1.  **Plans (`@plan.mdc`)**:

    - **Purpose**: Defines how Product Requirements Documents (PRDs) are created and structured for projects.
    - **Location**: Each project has its own `plan.md` at `_parallel/projects/{project}/plan.md`
    - **Key Registry**: Global `_parallel/INDEX.md` maintains discovery of all project plans
    - **Details**: For plan creation, fully review [task-magic/plan.mdc](mdc:.cursor/rules/task-magic/plan.mdc)

2.  **Tasks (`@tasks.mdc`)**:

    - **Purpose**: Governs the creation, management, and lifecycle of individual development tasks within projects.
    - **Active Tasks**: Each project's active tasks reside in `_parallel/projects/{project}/tasks/` as `task{id}_name.md` files.
    - **Master View**: Each project has a checklist at `_parallel/projects/{project}/TASKS.md` that mirrors the status of tasks in that project's tasks directory.
    - **Details**: For task creation, fully review [task-magic/tasks.mdc](mdc:.cursor/rules/task-magic/tasks.mdc)

3.  **Memory (`@memory.mdc`)**:

    - **Purpose**: Manages a hierarchical memory system with both project-specific and global workspace memory for optimal context management.
    - **Project Memory**: Each project maintains its own memory archive at `_parallel/projects/{project}/memory/` with local task history and insights.
    - **Global Memory**: Cross-project learning through global archives at `_parallel/memory/` with workspace-wide knowledge aggregation.
    - **Dual Archival**: Project tasks are archived to both project memory (primary) and global memory (cross-project learning).
    - **Details**: For archival workflows and memory management, fully review [task-magic/memory.mdc](mdc:.cursor/rules/task-magic/memory.mdc)

4.  **Progress-Based Handoffs (`@handoff.mdc` or `task-magic/handoff.mdc`)**:

    - **Purpose**: Facilitates context transfer between AI sessions using project-scoped progress tracking.
    - **Location**: Progress files are stored as `_parallel/projects/{project}/progress_log.md` or status snapshots at `_parallel/projects/{project}/STATUS.md`.
    - **Details**: For creating and updating progress files, review [task-magic/handoff.mdc](mdc:.cursor/rules/task-magic/handoff.mdc)

5.  **Legacy Migration (`@legacy.mdc`)**:
    - **Purpose**: Provides comprehensive guidance for upgrading from legacy single-directory Task Magic to enhanced project-scoped system.
    - **Trigger**: Use when detecting legacy structures or user requests migration.
    - **Focus**: Migration process, not legacy system usage - helps users upgrade to new system.
    - **Details**: For migration workflows, fully review [task-magic/legacy.mdc](mdc:.cursor/rules/task-magic/legacy.mdc)

## Key Distinctions

- **Tool Agnostic**: The `_parallel/` directory structure can be used by any AI assistant, human developer, or development tool
- **Cursor Specific**: The `.cursor/rules/task-magic/` files are specific instructions for Cursor's AI on how to operate the system
- **Multi-Project**: The enhanced system supports multiple isolated projects with hierarchical memory (project-specific + global) for optimal context management
- **Migration Ready**: Legacy detection and upgrade guidance built into the system

This interconnected system allows for structured project development across multiple projects, from high-level planning to task execution and historical review, primarily managed through Markdown files and defined agent responsibilities.
